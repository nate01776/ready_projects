# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  name: 'Default'

steps:
- task: DownloadGitHubRelease@0
  inputs:
    connection: 'Personal Github'
    userRepository: 'nate01776/ready_projects'
    defaultVersionType: 'latest'
    downloadPath: '$(System.ArtifactsDirectory)'

- task: CmdLine@2
  inputs:
    script: '/home/nw/SmartBear/ReadyAPI-2.8.2/bin/testrunner.sh -r -a -j -tsmoke "-f$(System.DefaultWorkingDirectory)/TestResults" "-RJUnit-Style HTML Report" -FXML "-Eremote" "$(Build.SourcesDirectory)/test_xml"'

- task: PublishTestResults@2
  condition: always()
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '**/*.xml'
    searchFolder: '$(System.DefaultWorkingDirectory)/TestResults'